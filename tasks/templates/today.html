{% extends 'base.html' %}
{% load render_assets %}

{% block body_class %}page-daily{% endblock %}

{% block content %}
<!-- Vue entry-point -->


<div class="daily">
<form action="" method="POST">
    {% csrf_token %}
    <div class="cont">
        <h2>
            <a class="menulink" href="?date={{ yesterday|date:"Y-m-d" }}">&lt;</a>
            {{ today }}:

            <select name="thread" id="thread">
                {% for a_thread in threads %}
                <option
                    value="{{ a_thread.name }}"
                    {% if a_thread.name == thread.name %}
                        selected
                    {% endif %}
                >{{ a_thread }}</option>
                {% endfor %}
            </select>
            <script type="text/javascript">
                function setThread(ev) {
                    window.location.search = '?thread=' + ev.target.value;
                }

                document
                    .getElementById('thread')
                    .addEventListener('change', setThread);
            </script>
            <a class="menulink" href="?date={{ tomorrow|date:"Y-m-d"  }}">&gt;</a>
        </h2>
        <p class="menu">
            <a href="/">Daily</a>
            <a href="/hello/world/">Tasks</a>
            <a href="/observations/">Observations</a>
            <a href="/admin/tree/observation/add/">+Observation</a>
            <a href="/periodical/">Periodical</a>
            <a href="/summaries/">Summaries</a>

        </p>
    </div>

    <div class="form">


        <div class="left">
            <div class="navigation">


            </div>

            <div class="plan">
            <h3>Today's plan</h3>
            {{ today_plan_form.as_p }}
            </div>

            <div class="tomorrow">
            <h3>Tomorrow's plan</h3>
            {{ tomorrow_plan_form.as_p }}
            </div>
        </div>

        <div class="right">

            <div class="reflection">
            <h3>Today's reflection</h3>
            {{ reflection_form.as_p }}
            </div>

            <button>Submit</button>
        </div>
    </div>
</form>
</div>

{% endblock %}

<!-- Load Vue app -->
{% block extrajs %}
{% endblock %}

